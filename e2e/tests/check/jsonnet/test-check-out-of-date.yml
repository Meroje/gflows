setup:
  files:
    - path: .gflows/config.yml
      content: |
        templates:
          engine: jsonnet
    - path: .gflows/workflows/test.jsonnet
      content: |
        std.manifestYamlDoc({
          'on': {
            push: {
              branches: ['develop']
            }
          },
          jobs: {
            hello: {
              'runs-on': 'ubuntu-latest',
              steps: [
                { run: 'echo hello, world!' }
              ]
            }
          }
        })
    - path: .github/workflows/test.yml

run: check

expect:
  error: workflow validation failed
  output: |
    Checking test ... FAILED
      Content is out of date for "test" (.github/workflows/test.yml)
      â–º Run "gflows workflow update" to update
