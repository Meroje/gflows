setup:
  files:
    - path: libs/my-lib.gflowslib
      source: e2e/gflowslibs/ytt/my-lib.gflowslib
    - path: libs/common/steps.lib.yml
      source: e2e/gflowslibs/ytt/common/steps.lib.yml
    - path: .gflows/config.yml
      content: |
        templates:
          engine: ytt
          defaults:
            libs:
            - ../libs
    - path: .gflows/workflows/test/config.yml
      content: |
        #@ load("steps.lib.yml", "setup_go")

        "on":
          push:

        jobs:
          test:
            runs-on: ubuntu-latest
            steps:
            - #@ setup_go()

run: update

expect:
  output: |2
         create .github/workflows/test.yml (from .gflows/workflows/test.jsonnet)

  files:
  - path: .gflows/config.yml
  - path: .gflows/workflows/test/config.yml
  - path: libs/my-lib.gflowslib
  - path: libs/common/steps.lib.yml
  # - path: .github/workflows/test.yml
  #   content: |
  #     # File generated by gflows, do not modify
  #     # Source: .gflows/workflows/test.jsonnet
  #     "jobs":
  #       "test":
  #         "runs-on": "ubuntu-latest"
  #         "steps":
  #         - "run": "echo Hello World!!!"
  #     "on":
  #       "push": {}
      
