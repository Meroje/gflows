setup:
  files:
    - path: my-lib/gflowspkg.json
      content: |
        {
          "name": "my-pkg",
          "files": [
            "workflows/my-workflow/my-workflow.yml"
          ]
        }
    - path: my-lib/workflows/my-workflow/my-workflow.yml
      content: |
        "on":
          push:
            branches: [develop]
        jobs:
          hello:
            runs-on: ubuntu-latest
            steps:
            - run: echo hello, world!
    - path: .gflows/config.yml
      content: |
        templates:
          engine: ytt
          defaults:
            dependencies:
              - ../my-lib
run: update

expect:
  output: |2
         create .github/workflows/my-workflow.yml (from my-pkg/workflows/my-workflow)
  files:
  - path: .gflows/config.yml
  - path: my-lib/gflowspkg.json
  - path: my-lib/workflows/my-workflow/my-workflow.yml
  - path: .github/workflows/my-workflow.yml
    content: |
      # File generated by gflows, do not modify
      # Source: my-pkg/workflows/my-workflow
      "on":
        push:
          branches:
          - develop
      jobs:
        hello:
          runs-on: ubuntu-latest
          steps:
          - run: echo hello, world!
